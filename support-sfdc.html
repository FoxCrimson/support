<!doctype html>
<html lang="en-US">

<head>
    <title>Perfecto Support Portal</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="Perfecto Suppport Portal - Knowledge Base, Online University, Chat, Case Submission, and more.">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
    <style>
        .cover {
            background: #2b2d34 url(https://upload.wikimedia.org/wikipedia/commons/thumb/c/c8/Altja_jõgi_Lahemaal.jpg/1200px-Altja_jõgi_Lahemaal.jpg) center;
            background-size: cover;
            min-height: 50rem;
            height: auto;
            border-radius: 0;
            width: 100%;
            color: #fff;
            padding-top: 2rem;
        }
        .navbar {
            opacity: 0.7;
        }
        .navbar-brand {
            font-family: "Montserrat", "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 1.5rem;
            font-weight: bold;
            margin-top: 0;
        }
        .navbar a.nav-link {
            color: white!important;
        }
        .navbar a.nav-link-good {
            color:lightgreen!important;
        }
        .navbar a.nav-link-bad {
            color: red!important;
        }
        .navbar a.nav-link:hover {
            color: lightgreen!important;
        }
        h1 {
            font-size:4vw;
            padding-bottom:5px;
        }
        .container h1 {
            margin-top: 30px;
            padding-top:40px;
        }
        .container h3 {
            font-size:3vw;
        }
        .nav-pills a {
            color: black;
        }
        .nav-pills a:hover {
            color: darkgray;
        }
        .nav-pills .nav-link.active {
            background-color:black;
        }
        .nav-pills .svg-inline--fa {
            font-size: 4rem;
            margin-bottom: 5px;
        }
        article a {
            font-size: 1.1rem;
            color:green;
        }
    </style>
    <script src="https://www.google.com/recaptcha/api.js"></script><!--async defer?-->
    <script>
        // From Salesforce - not sure I need this.
        function timestamp() { var response = document.getElementById("g-recaptcha-response"); if (response == null || response.value.trim() == "") {var elems = JSON.parse(document.getElementsByName("captcha_settings")[0].value);elems["ts"] = JSON.stringify(new Date().getTime());document.getElementsByName("captcha_settings")[0].value = JSON.stringify(elems); } } setInterval(timestamp, 500);
    </script>
    <script src="https://c.la1-c1-lon.salesforceliveagent.com/content/g/js/41.0/deployment.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
    <script>
        liveagent.init('https://d.la1-c1-lon.salesforceliveagent.com/chat', '572D000000001yp', '00D200000001UUG');
        if (!window._laq) {
          window._laq = [];
        }
        window._laq.push(function(){
          var fqdn = document.getElementById('fqdn').value;
          //var chatEnabledSites = ['demo.perfectomobile.com', 'ps.perfectomobile.com'];
          //if(chatEnabledSites.includes(fqdn)) {
            liveagent.showWhenOnline('573D0000000028q', document.getElementById('liveagent_button_online_573D0000000028q'));
            liveagent.showWhenOffline('573D0000000028q', document.getElementById('liveagent_button_offline_573D0000000028q'));
          //} else console.log('CHAT NOT ENABLED');
        });
    </script>
</head>

<body>
    <section class="cover text-center">
        <!--Semi-transparent navbar over background image-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
                <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarToggler-1" aria-controls="navbarToggler-1" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <span class="navbar-brand">Support</span>
                <div class="collapse navbar-collapse justify-content-end" id="navbarToggler-1">
                    <ul class="navbar-nav mt-2 mt-md-0">
                        <li class="nav-item">
                            <a class="nav-link nav-link-good disabled" href="#">All clouds operating normally</a>
                            <!-- <a class="nav-link nav-link-bad disabled" href="#">Service degraded for some clouds</a> -->
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://perfecto.litmos.com" target="_blank">University</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://developer.perfectomobile.com" target="_blank">Community</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="https://perfectomobile.force.com/customers/" target="_blank"><i class="fa fa-user"></i> Customer Login
                            </a>
                        </li>
                    </ul>
                </div>
            </div><!--container-->
        </nav>
        <!--Middle of the background image-->
        <div class="container">
            <h1 class="text-center">Welcome to Perfecto Support</h1>
            <h3 class="text-center d-none d-sm-block">Resources at your fingertips.</h3> 
            <div class="row justify-content-around">
                <div class="col-lg-8 col-md-10" style="padding-top:45px;">
                    <form action="http://developers.perfectomobile.com/dosearchsite.action" method="get" target="_blank" name="search" id="search">
                        <div class="form-group">
                            <div class="input-group input-group-lg">
                                <div class="input-group-prepend">
                                    <button class="btn btn-secondary" id="submitButton" type="submit"><span class="fas fa-search"></span></button>
                                </div>
                                <input class="form-control" name="queryString" id="queryString" type="text" required autofocus placeholder="Search Support" aria-label="Search Support">
                            </div>
                        </div>
                    </form>
                </div><!--col-6-->
            </div><!--row-->
        </div><!--cover-container-->
    </section>
    <!--Choose a Topic pills-->
    <div class="container">
        <h1 class="text-muted text-center" style="margin-bottom:10px;"><!--Placeholder for chat-->Choose a Topic</h1>
        <ul id="topicTabs" class="nav nav-pills nav-justified" role="tablist">
            <li class="nav-item">
                <a id="deviceTab" data-toggle="tab" role="tab" aria-controls="device" class="nav-link active" href="#"><span class="fas fa-mobile-alt"></span><br/>Device</a>
            </li>
            <li class="nav-item">
                <a id="webTab" data-toggle="tab" role="tab" aria-controls="web" class="nav-link" href="#"><span class="fas fa-globe"></span><br/>Web</a>
            </li>
            <li class="nav-item">
                <a id="automationTab" data-toggle="tab" role="tab" aria-controls="automation" class="nav-link" href="#"><span class="fas fa-code-branch"></span><br/>Automation</a>
            </li>
            <li class="nav-item">
                <a id="performanceTab" data-toggle="tab" role="tab" aria-controls="performance" class="nav-link" href="#"><span class="fas fa-stopwatch"></span><br/>Performance</a>
            </li>
            <li class="nav-item">
                <a id="requestTab" data-toggle="tab" role="tab" aria-controls="request" class="nav-link" href="#"><span class="far fa-question-circle"></span><br/>Request</a>
            </li>
            <li class="nav-item">
                <a id="suggestionTab" data-toggle="tab" role="tab" aria-controls="suggestion" class="nav-link" href="#"><span class="fas fa-lightbulb"></span><br/>Suggestion</a>
            </li>
        </ul>
        <div class="row">&nbsp;</div>
        <div class="row justify-content-around">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">Top articles on <b id="searchTerm" class="text-capitalize">Devices</b></div>
                    <div id="articles" class="card-body">
                    </div>
                </div><br/>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header align-middle"><a href="javascript://Chat" id="liveagent_button_online_573D0000000028q" onclick="liveagent.startChat('573D0000000028q')" class="btn btn-success" style="display: none;"><i class="far fa-comment-alt"></i> Chat with Support Engineer</a><a class="btn btn-light disabled" id="liveagent_button_offline_573D0000000028q" style="display: none;"><i class="far fa-comment-alt"></i> Chat Offline</a><a class="btn btn-light disabled"><i class="fas fa-pencil-alt"></i> Submit a request</a></div>
                    <div class="card-body">
                        <form id="theForm" name="theForm">
                            <input type=hidden name='captcha_settings' value='{"keyname":"perfecto_io","fallback":"true","orgId":"00D200000001UUG","ts":""}'>
                            <input type=hidden name="orgid" value="00D200000001UUG">
                            <input type=hidden name="retURL" value="https://perfecto.io/support">
                            <input type="hidden" id="type" name="type" value="Issue">
                            <input type="hidden" id="topic" name="00ND0000006MZHc" value="Device Issue">
                            <input type="hidden" id="external" name="external" value="1" />
                            <div class="form-group">
                                <label for="fqdn" class="sr-only">Your cloud's FQDN</label>
                                <input class="form-control" type="text" id="fqdn" name="00ND0000002w9Lj" placeholder="Cloud FQDN like name.perfectomobile.com" required maxlength="255" />
                            </div>
                            <div class="form-group">
                                <label for="name" class="sr-only">Your name</label>
                                <input type="text" class="form-control" placeholder="First and last name" id="name" name="name" maxlength="80" />
                            </div>
                            <div class="form-group">
                                <label for="email" class="sr-only">Your work email address</label>
                                <input class="form-control" type="email" id="fqdn" name="email" placeholder="Work email address" required maxlength="80" />
                            </div>
                            <div class="form-group">
                                <label for="phone" class="sr-only">Best phone number to reach you</label>
                                <input class="form-control" type="phone" id="phone" name="phone" placeholder="Phone number with country code" maxlength="40" />
                            </div>
                            <div class="form-group">
                                <label for="severity" class="sr-only">Severity of this request</label>
                                <select id="severity" name="00ND0000005cKFJ" class="form-control">
                                    <option selected disabled>Select a severity...</option>
                                    <option value="Low/Minor">Low/Minor</option>
                                    <option value="Medium">Medium</option>
                                    <option value="Major">Major</option>
                                    <option value="Critical">Critical</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="subtopic" class="sr-only">Subtopic</label>
                                <select id="subtopic" name="00ND0000004nqq" class="form-control">
                                    <option selected disabled>Select a subtopic...</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="subject" class="sr-only">Subject</label>
                                <input class="form-control" type="text" id="subject" name="subject" placeholder="Brief description of your request" required maxlength="80" />
                            </div>
                            <div class="form-group">
                                <label for="description" class="sr-only">Description of your issue</label>
                                <textarea class="form-control" rows="4" id="description" name="description" placeholder="More details will help us resolve your request faster." required></textarea>
                                <small id="fileUploadHelp" class="form-text text-muted">Include info like device ID, execution report URL, etc.</small>
                            </div>
                            <p>If you need to attach a screenshot or file, preply to our email confirmation of your new case or <a href="https://perfectomobile.force.com/customers/">login to the Support Portal</a>.</p>
                            <!-- <div class="form-group">
                                <label for="fileUpload" class="sr-only">Files to upload</label>
                                <input type="file" class="form-control" id="fileUpload" name="tfa_17" />
                                <small id="fileUploadHelp" class="form-text text-muted">Screenshots, logs, IPAs, APKs, etc.</small>
                            </div> -->
                            <div class="g-recaptcha" data-sitekey="6Lc90EsUAAAAAKEBIwXp-jWbTY1GElbWNiW4cg1E"></div><br/>
                            <input type="submit" class="btn btn-success" id="submit">
                        </form>
                    </div><!--card-body-->
                </div><!--card-->
            </div><!--col-6-->
        </div><!--row-->
    </div><!--container-->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script>
        // Setup relationship between tabs and Salesforce Case.Type and Case.Case Reason (topic below)
        var caseTree = {
            device: {
                type: 'Issue',
                topic: 'Device Issue',
                subtopics: ['Cradle Error', 'Device Unresponsive', 'Device Locked', 'Network Connectivity Issue', 'Device Disconnected', 'Device Busy', 'App Install Failed', 'Other'],
                articles: [
                    {
                        title: 'Device and cradle operations',
                        url: 'http://developers.perfectomobile.com/pages/viewpage.action?pageId=11174912',
                        synopsis: 'The device and cradle operations are used to retrieve information about the devices and cradles, associated with a specific Perfecto CQ Lab, at the data center...'
                    },
                    {
                        title: 'Recover a device',
                        url: 'http://developers.perfectomobile.com/pages/viewpage.action?pageId=13893782',
                        synopsis: 'Recovers a connected device that is unresponsive. For example, a device with an interrupted video, black screen or touch failure...'
                    },
                    {
                        title: 'Device operations',
                        url: 'http://developers.perfectomobile.com/display/PD/Device+operations',
                        synopsis: 'Broad range of mobile device operations such as touch, scroll, swipe, gestures, GPS location, text entry, and recovery.'
                    },
                    {
                        title: 'How to handle device locking',
                        url: 'http://developers.perfectomobile.com/display/TT/Device+Screen+Locking',
                        synopsis: 'How to handle the device screen locking to ensure successful script executions.'
                    },
                    {
                        title: 'What to check to ensure device network connectivity',
                        url: 'http://developers.perfectomobile.com/display/TT/What+to+Check+when+a+Mobile+Website+will+not+Load',
                        synopsis: 'Sometimes your website will not load on the mobile device. Here are some practices to follow to fix the issue.'
                    },
                    {
                        title: 'Solving device connection issues',
                        url: 'http://developers.perfectomobile.com/display/TT/Solving+Device+Connection+Issues',
                        synopsis: 'A list of errors and solutions to help connect devices.'
                    },
                    {
                        title: 'Release a busy device via the REST API',
                        url: 'http://developers.perfectomobile.com/display/PD/Release+Device',
                        synopsis: 'Forcefully releases the device specified by <deviceId>, the device is either allocated to the user or the user is an administrator.'
                    },
                    {
                        title: 'Troubleshooting app install failed on iOS',
                        url: 'http://developers.perfectomobile.com/display/TT/Troubleshooting+iOS+App+Install+and+Launch+Failures',
                        synopsis: 'What you need to look for when your app fails to Install or launch.'
                    },
                    {
                        title: 'Troubleshooting app install failed on Android',
                        url: 'http://developers.perfectomobile.com/display/TT/Android+App%3A+Install+Failed+UID+Changed+message',
                        synopsis: 'How to resolve a Install_Failed_UID_Changed message.'
                    }
                ]
            },
            web: {
                type: 'Issue',
                topic: 'Web Issue',
                subtopics: ['Web Browser Availability', 'Web Video Issue', 'Web Functionality Issue', 'Other'],
                articles: [
                    {
                        title: 'Desktop web testing',
                        url: 'http://developers.perfectomobile.com/display/TT/Desktop+Web+Testing',
                        synopsis: 'Tips and tricks for desktop web testing.'
                    },
                    {
                        title: 'Using JavaScript to improve testing for responsive web design',
                        url: 'http://developers.perfectomobile.com/display/TT/Additional+Tests+for+Responsive+Web+Design',
                        synopsis: 'How to deal with responsive web design using JavaScript.'
                    },
                    {
                        title: 'Implementing customization for desktop web',
                        url: 'http://developers.perfectomobile.com/display/PD/Desktop-Web+Customization+Service',
                        synopsis: 'When selecting a Desktop-Web device to use for automation testing of a web application, there is sometimes the need to create the proper environment for the device.'
                    },
                    {
                        title: 'Desktop web environments',
                        url: 'http://developers.perfectomobile.com/display/PD/Desktop+Web+Devices',
                        synopsis: 'Perfecto provides, in addition to the large set of mobile and wearable devices, a set of desktop web environments.'
                    },
                    {
                        title: 'Visual Analysis for Desktop Web',
                        url: 'http://developers.perfectomobile.com/display/PD/Visual+Analysis+for+Desktop+Web',
                        synopsis: 'The FastWeb Desktop Web devices of the Perfecto Lab support visual analysis of the browser screen to identify Text.'
                    },
                    {
                        title: 'Uploading files to Perfecto desktop web instances',
                        url: 'http://developers.perfectomobile.com/display/TT/Upload+File+to+Perfecto+web',
                        synopsis: 'Some desktop web tests require file upload as part of the flow. Here is how to do it on Perfecto.'
                    }
                ]
            },
            automation: {
                type: 'Issue',
                topic: 'Automation Issue',
                subtopics: ['Appium Issue', 'Selenium Issue', 'Espresso Issue', 'XCTest Issue', 'JavaScript Issue', 'Object Spy Issue', 'UFT Issue', 'Framework Issue', 'Perfecto Native Issue', 'Other'],
                articles: [
                    {
                        title: 'Getting started with Appium',
                        url: 'http://developers.perfectomobile.com/pages/viewpage.action?pageId=19170304',
                        synopsis: 'Everything you need to know about using Appium with Perfecto.'
                    },
                    {
                        title: 'Getting started with Selenium',
                        url: 'http://developers.perfectomobile.com/pages/viewpage.action?pageId=19170304',
                        synopsis: 'Everything you need to know about using Selenium with Perfecto.'
                    },
                    {
                        title: 'Work with Espresso or XCTest',
                        url: 'http://developers.perfectomobile.com/display/PD/Development',
                        synopsis: 'The Perfecto CQ Lab now makes a variety of devices and desktop browsers available for the application development community.'
                    },
                    {
                        title: 'Migrating iOS test scripts to XCUITest-based automation infrastructure',
                        url: 'http://developers.perfectomobile.com/display/TT/Migrating+iOS+test+scripts+to+XCUITest-based+automation+infrastructure',
                        synopsis: 'With the introduction of iOS 10, Apple has deprecated its legacy UI Automation framework and instructed all developers to start using the XCUITest framework, introduced in iOS 9.'
                    },
                    {
                        title: 'Quantum Framework: Is your current test framework slowing you down?',
                        url: 'http://developers.perfectomobile.com/display/TT/Introducing+Quantum+Framework',
                        synopsis: 'New open source framework enabling testers of all skills to build a robust test framework.'
                    },
                    {
                        title: 'Testing with Protractor',
                        url: 'http://developers.perfectomobile.com/display/PD/Protractor',
                        synopsis: 'Test your AngularJS web apps using Protractor and Perfecto.'
                    },
                    {
                        title: 'Object Spy overview',
                        url: 'http://developers.perfectomobile.com/display/PD/Object+Spy',
                        synopsis: 'The Object Spy is an Automation tool used to view detected objects retrieved from the device screen in webpage, native, and hybrid applications; and displays their associated functions.'
                    },
                    {
                        title: 'Automation with UFT',
                        url: 'http://developers.perfectomobile.com/display/PD/UFT+Integration',
                        synopsis: 'Still using Micro Focus UFT? This is the reference for using it with Perfecto.'
                    },
                    {
                        title: 'Perfecto Native Automation',
                        url: 'http://developers.perfectomobile.com/display/PD/Perfecto+Native+Automation',
                        synopsis: 'Perfecto provides an IDE that includes an interface not only for Interactive (Manual) Testing, but also an interface for creating Automation scripts.'
                    }
                ]
            },
            performance: {
                type: 'Issue',
                topic: 'Performance Issue',
                subtopics: ['Image Mode', 'Interactive Latency', 'Execution Slow', 'App install Slow', 'App Launch Slow', 'Login Slow', 'Other'],
                articles: [
                    {
                        title: 'Image Mode: What is it and how do I fix it?',
                        url: 'http://developers.perfectomobile.com/pages/viewpage.action?pageId=21432526',
                        synopsis: 'If interacting with your device is slow, your streaming server may be blocked by your IT department.'
                    },
                    {
                        title: 'How do I troubleshoot interactive latency?',
                        url: 'http://developers.perfectomobile.com/display/TT/Networking+Best+Practices+and+Performance+Troubleshooting',
                        synopsis: 'Optimize performance and prevent disconnections in your network. Understand the protocols used, effects of proxy servers and VPNs.'
                    },
                    {
                        title: 'Troubleshooting iOS App Install and Launch Failures',
                        url: 'http://developers.perfectomobile.com/display/TT/Troubleshooting+iOS+App+Install+and+Launch+Failures',
                        synopsis: 'What you need to look for when your iOS app fails to install or launch.'
                    },
                    {
                        title: 'Faster script execution',
                        url: 'http://developers.perfectomobile.com/display/TT/Faster+Script+Execution',
                        synopsis: 'In this article, we provide suggestions how to improve your script execution time.'
                    },
                    {
                        title: 'Parallel execution with TestNG',
                        url: 'http://developers.perfectomobile.com/display/TT/Parallel+Execution+with+TestNG',
                        synopsis: 'Save time by running scripts in parallel. Remember not to try to use the same device from multiple scripts.'
                    },
                    {
                        title: 'Find elements faster with Appium and XCUITest',
                        url: 'http://developers.perfectomobile.com/pages/viewpage.action?pageId=21436560',
                        synopsis: 'In this article, we suggest another way to locate (find) an element which significantly improves the performance and shortens the execution time.'
                    },
                    {
                        title: 'How can I launch an iOS app faster?',
                        url: 'http://developers.perfectomobile.com/display/TT/iOS+Troubleshooting%3A+Slow+iOS+app+launch',
                        synopsis: 'Learn why your iOS app is taking a long time to launch.'
                    },
                    {
                        title: 'Installing an Application using the Install Widget',
                        url: 'http://developers.perfectomobile.com/display/TT/Installing+an+Application+using+the+Install+Widget',
                        synopsis: 'Here is how you use the install widget of the Perfecto Lab, to install your application.'
                    }
                ]
            },
            request: {
                type: 'Request',
                topic: 'Request',
                subtopics: [ 'New Device Request', 'Device Swap', 'Device Upgrade', 'Configuration Change', 'New Cloud User', 'Reg iOS Request', 'Cloud Upgrade', 'Device Template', 'Product Info', 'Documentation', 'Other'],
                articles: [
                    {
                        title: 'Requesting a device swap',
                        url: 'http://developers.perfectomobile.com/display/TT/Requesting+a+Device+Swap'
                    },
                    {
                        title: 'Installing Mobile Provisioning Profiles (regiOS)',
                        url: 'http://developers.perfectomobile.com/display/TT/How+to+Properly+Install+the+regiOS+Provisioning+Module'
                    },
                    {
                        title: 'User management - adding users, roles, tokens',
                        url: 'http://developers.perfectomobile.com/display/PD/User+Management'
                    },
                    {
                        title: 'Create user via REST API',
                        url: 'http://developers.perfectomobile.com/pages/viewpage.action?pageId=12419106'
                    },
                    {
                        title: 'Cloud updates',
                        url: 'http://developers.perfectomobile.com/display/PD/Product+Updates'
                    },
                    {
                        title: 'Adding templates',
                        url: 'http://developers.perfectomobile.com/display/TT/Adding+Templates+to+the+User+Directory'
                    },
                    {
                        title: 'Product documementation',
                        url: 'http://developers.perfectomobile.com/display/PD/Documentation'
                    }
                ]
            },
            suggestion: {
                type: 'Suggestion',
                topic: '', // Intentionally blank
                subtopics: [], // Intentionally blank
                articles: []
            }
        };

        // Load articles in card lower-left from array
        var loadArticles = function(tabName) {
            if(tabName != 'request' && tabName != 'suggestion') {
                $('#searchTerm').text(tabName);
                $('#articles').empty(); // Clear the card of past articles
                $.each(caseTree[tabName].articles, function(index, value) {
                    var currentNode = caseTree[tabName].articles[index];
                    var url = currentNode.url;
                    var title = currentNode.title;
                    var synopsis = currentNode.synopsis;
                    // Next line will break on super-old browsers
                    var article = `<article><a href="${url}" target="_blank">${title}</a></article><p class="text-muted">${synopsis}</p>`;
                    $('#articles').append(article);
                });
            }
        };

        // Sets Case Type, Topic, and Subtopics
        var loadSubtopics = function(tabName) {
            // Set Case Type and Topic
            $('#type').val(caseTree[tabName].type);
            $('#topic').val(caseTree[tabName].topic);
            // Get reference to subtopic select object
            var subtopicsList = $('#subtopic'); // Get a reference so we don't scan the DOM on $.each below
            subtopicsList.find("option:gt(0)").remove(); // Leave the first item - bag the rest
            // Add the subtopics for the tab
            $.each(caseTree[tabName].subtopics, function(index, value) {
                subtopicsList.append($('<option />').attr('value', value).text(value)); 
            });
        };

        // Load subtopics for default tab selected (Devices)
        $(document).ready(function() {
            loadSubtopics('device');
            loadArticles('device');
            // $('#request').validate({ // initialize the plugin
            //     rules: {
            //         email: {
            //             required: true,
            //             email: true
            //         },
            //         fqdn: {
            //             required: true,
            //             minlength: 13
            //         },
            //         severity: {
            //             required: true
            //         }
            //     }
            // });
        });

        // Handle click on tabs
        $('#topicTabs').on('shown.bs.tab', function(e) {
            var selectedTabName = $(e.target).attr('aria-controls');
            // TODO: Hide Subtopics If Type = Suggestion
            loadSubtopics(selectedTabName);
            loadArticles(selectedTabName);
        });

        // Handle form submit via AJAX
        $("#theForm").submit(function(e) {
            var url = 'https://webto.salesforce.com/servlet/servlet.WebToCase?encoding=UTF-8';
            $.ajax({
                type: "POST",
                url: url,
                data: $("#theForm").serialize(), // serializes the form's elements.
                success: function(data) {
                    console.log('From Salesforce', data); // show response from Salesforce (perhaps Case Number?)
                    // TODO: display an alert-success and clear the form but stay on this page.
                }
            });
            e.preventDefault(); // avoid to execute the actual submit of the form.
        });

        // Disabled as we are not searching the KB based on subtopic selection
        // $('#subtopic').change(function() {
        //     loadArticles($('#subtopic option:selected').text());
        // });
    </script>
</body>

</html>
